ahoyapi: v2
env: .env
commands:
  test-global:
    cmd: echo $GLOBAL

  test-cmd:
    cmd: echo $COMMAND
    env:
      - .env.cmd

  test-override:
    cmd: echo $TO_BE_OVERRIDDEN
    env: .env.cmd

  test-multiple-cmd-overridden:
    cmd: echo $TO_BE_OVERRIDDEN
    env:
      - .env
      - .env.cmd

  test-multiple-with-missing-cmd:
    cmd: echo $COMMAND
    env:
      - .env.not-here
      - .env.cmd

  test-multiple-with-missing-cmd-and-override:
    cmd: echo $COMMAND
    env:
      - .env.not-here
      - .env.cmd
      - .env

  test-nonexistent-env:
    cmd: echo "This should not print!"
    env:
      - .env.thisfiledoesntexist

  test-keep-established-env-vars:
    cmd: echo $ENV_CLOBBER_TEST
